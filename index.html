<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>枝豆を当てるゲーム</title>
<style>
  body {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
    background-color: #f0f0f0;
  }
  #container {
    position: relative;
    width: 600px;
    height: 100px;
    background-color: #ffffff; /* 枝豆の色 */
    border-radius: 10px;
    display: flex;
    justify-content: space-around;
    align-items: center;
  }
  .bean {
    width: 40px;
    height: 80px;
    background-image: url('mame.png'); /* 豆の画像 */
    background-size: contain;
    background-repeat: no-repeat;
    cursor: pointer;
  }
  .hit {
    filter: brightness(100); /* 当たった豆の色を変更 */
  }
  #message {
    margin-top: 20px;
    font-size: 24px;
    font-weight: bold;
  }
  #restartButton {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    background-color: #86B300;
    color: #ffffff;
    border: none;
    border-radius: 5px;
    display: none;
  }
  #winImage {
    max-width: 100%;
    max-height: 100vh;
    display: none;
  }
</style>
</head>
<body>
<div id="container">
  <!-- 10個の豆を配置 -->
  <div id="bean0" class="bean" onclick="checkBean(0)"></div>
  <div id="bean1" class="bean" onclick="checkBean(1)"></div>
  <div id="bean2" class="bean" onclick="checkBean(2)"></div>
  <div id="bean3" class="bean" onclick="checkBean(3)"></div>
  <div id="bean4" class="bean" onclick="checkBean(4)"></div>
  <div id="bean5" class="bean" onclick="checkBean(5)"></div>
  <div id="bean6" class="bean" onclick="checkBean(6)"></div>
  <div id="bean7" class="bean" onclick="checkBean(7)"></div>
  <div id="bean8" class="bean" onclick="checkBean(8)"></div>
  <div id="bean9" class="bean" onclick="checkBean(9)"></div>
</div>
<div id="message"></div>
<button id="restartButton" onclick="restartGame()">最初から始める</button>
<img id="winImage" src="complete.jpg" alt="Win Image" />
<audio id="successSound" src="success.mp3" preload="auto"></audio> <!-- 正解の音声ファイル -->
<audio id="failSound" src="fail.mp3" preload="auto"></audio> <!-- 不正解の音声ファイル -->

<script>
let isContentPresent, correctCount;
const requiredCorrectCount = 8; // Number of correct beans required to win

function initializeGame() {
  isContentPresent = Array(requiredCorrectCount).fill(true).concat(Array(10 - requiredCorrectCount).fill(false));
  isContentPresent = isContentPresent.sort(() => Math.random() - 0.5);
  correctCount = 0;
  document.getElementById('message').textContent = '';
  document.getElementById('restartButton').style.display = 'none';
  document.getElementById('container').style.display = 'flex';
  document.getElementById('winImage').style.display = 'none';
  // Enable clicking on each bean
  for (let i = 0; i < 10; i++) {
    document.getElementById('bean' + i).style.pointerEvents = 'auto';
    document.getElementById('bean' + i).classList.remove('hit');
  }
}

function checkBean(index) {
  let messageDiv = document.getElementById('message');
  if (isContentPresent[index]) {
    correctCount++;
    document.getElementById('bean' + index).classList.add('hit'); // Change the color of the hit bean
    document.getElementById('successSound').play(); // Play the success sound
    if (correctCount === requiredCorrectCount) {
      messageDiv.textContent = 'おめでとうございます！あなたの勝ちです！';
      document.getElementById('container').style.display = 'none';
      document.getElementById('message').style.display = 'none';
      document.getElementById('restartButton').style.display = 'none';
      document.getElementById('winImage').style.display = 'block'; // Show the win image
    } else {
      messageDiv.textContent = `当たり！ あと${requiredCorrectCount - correctCount}回正解すれば勝ちです。`;
    }
  } else {
    document.getElementById('failSound').play(); // Play the fail sound
    messageDiv.textContent = '残念、もう一回';
    document.getElementById('restartButton').style.display = 'block';
    disableBeans(); // Disable clicking on all beans
  }
}

function disableBeans() {
  for (let i = 0; i < 10; i++) {
    document.getElementById('bean' + i).style.pointerEvents = 'none';
  }
}

function restartGame() {
  initializeGame();
}

initializeGame();
</script>

</body>
</html>

